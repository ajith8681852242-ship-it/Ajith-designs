<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ajith Studio | Order View</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        ::-webkit-scrollbar { display: none; }
        html, body { height: 100%; overflow-x: hidden; background-color: #ffffff; }

        /* NAVBAR */
        .navbar { background: #ffffff; height: 60px; display: flex; align-items: center; position: fixed; width: 100%; top: 0; z-index: 1000; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .nav-container { width: 92%; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-weight: 600; font-size: 1rem; margin-left: 15px; display: flex; align-items: center; }
        .logo-blue { color: #1e90ff; }
        .logo-icon-rotate { display: inline-block; animation: rotateLogo 5s linear infinite; margin-right: 10px; font-size: 1.4rem; color: #1e90ff !important; }
        @keyframes rotateLogo { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .toggle-btn { font-size: 1.6rem; color: #333; cursor: pointer; margin-right: 15px; display: flex; align-items: center; }

        .app-container { 
            margin-top: 60px; 
            display: flex; 
            flex-direction: column; 
            padding: 10px 25px 80px 25px; 
            min-height: calc(100vh - 60px); 
            box-sizing: border-box;
        }

        /* IMAGE & BADGE */
        .image-box { position: relative; width: 100%; max-width: 350px; aspect-ratio: 1/1; margin: 0 auto; border: 1px solid #ddd; border-radius: 4px; padding: 4px; overflow: hidden; background: #fff; }
        .image-box img { width: 100%; height: 100%; object-fit: contain; transition: opacity 0.3s ease; }
        .status-badge { position: absolute; top: 8px; left: 8px; padding: 4px 10px; border-radius: 3px; font-size: 10px; font-weight: 700; color: white; text-transform: uppercase; z-index: 10; }
        
        /* FIXED: No animation for Best Price */
        .bg-best { background: #1e90ff; animation: none; } 
        
        /* Blinking only for Festival Offer */
        .bg-offer { background: #ff0000; animation: slowBlinker 2s linear infinite; }
        @keyframes slowBlinker { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }

        .dots { display: flex; justify-content: center; gap: 4px; margin-top: 10px; }
        .dot { width: 4px; height: 4px; background: #ddd; border-radius: 50%; transition: 0.3s; }
        .dot.active { background: #6a3093; transform: scale(1.1); }

        /* HEADER & QTY */
        .header-row { display: flex; justify-content: space-between; align-items: center; min-height: 40px;}
        .title { font-size: 18px; font-weight: 600; color: #000; }
        .title span { color: #6a3093; }
        .qty-box { display: flex; align-items: center; justify-content: space-between; background: #ffffff; border: 1px solid #eee; padding: 0 5px; border-radius: 8px; min-width: 110px; height: 34px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .qty-btn { background: none; color: #6a3093; border: none; width: 30px; font-size: 20px; font-weight: 600; cursor: pointer; }
        #qtyVal { font-size: 16px; font-weight: 600; color: #333; }

        /* TIMER AREA */
        .combo-line { display: flex; justify-content: space-between; align-items: flex-end; margin-top: 7px; margin-bottom: 7px; }
        .combo-label { font-size: 11px; font-weight: 600; color: #333; text-transform: uppercase; }
        .timer-wrapper { text-align: right; display: flex; flex-direction: column; }
        #timerStatus { font-size: 8px; font-weight: 700; color: #6a3093; text-transform: uppercase; margin-bottom: 1px; }
        #timerClock { font-size: 10px; font-weight: 700; color: #ff0000; }

        /* BUTTON GRID */
        .combo-grid { display: flex; flex-direction: column; gap: 8px; }
        .row-compact { display: flex; gap: 8px; }
        .btn-combo { border: 1px solid #ccc; border-radius: 4px; font-size: 9px; font-weight: 600; width: 90px; height: 28px; display: flex; align-items: center; justify-content: center; cursor: pointer; background: #fff; transition: 0.2s; }
        .btn-combo.active { background: #6a3093; color: #fff; border-color: #6a3093; }

        /* DETAILS */
        .details-card { margin-top: 12px; }
        .details-card h4 { font-size: 12px; color: #449330; margin-bottom: 7px; font-weight: 700; }
        .details-card ul { list-style: none; font-size: 10.5px; line-height: 1.5; }
        .details-card ul li { margin-bottom: 3px; display: flex; align-items: center; color: #444; }
        .details-card ul li i { color: #6a3093; margin-right: 8px; font-size: 8px; }
        .free-blink { color: red; font-weight: bold; margin-left: 5px; animation: slowBlinker 2s linear infinite; }

        /* SELECTIONS */
        .bottom-selection { margin-top: 5px; padding-top: 10px; border-top: 1px solid #f0f0f0; }
        .select-group { display: flex; flex-direction: column; align-items: flex-start; margin-bottom: 12px; gap: 6px; }
        .select-title { font-size: 12px; font-weight: 600; color: #333; }
        .pill-container { display: flex; gap: 8px; }
        .size-pill { border: 1.5px solid #ccc; padding: 5px 12px; border-radius: 6px; font-size: 10px; font-weight: 600; cursor: pointer; background: white; }
        .size-pill.active { background: #6a3093; color: white; border-color: #6a3093; }
        .delivery-msg-box { border: 1.5px solid #ccc; padding: 6px 12px; border-radius: 8px; background: #fdfdfd; min-width: 160px; }
        #deliveryText { font-size: 11px; font-weight: 600; color: #6a3093; }

        /* FOOTER */
        .footer-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; position: fixed; bottom: 0; left: 0; width: 100%; background: #ffffff; padding: 10px 25px 12px 25px; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); z-index: 500; }
        .footer-btn { height: 35px; border-radius: 6px; font-size: 13px; font-weight: 600; border: none; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .back-btn { background: #f0f0f0; color: #333; border: 1px solid #ddd; }
        .next-btn { background: #6a3093; color: #fff; }

        /* Scaled down for 360px Small View */
@media (min-width: 360px) {
    .navbar { height: 60px; }
    .logo { font-size: 1.1rem; }
    .logo-icon-rotate { font-size: 1.5rem; }
    .toggle-btn { font-size: 1.7rem; }
    
    .app-container { margin-top: 65px; padding: 10px 20px 90px 20px; }
    .image-box { max-width: 340px; } /* Fits perfectly in 360px width */
    
    .status-badge { font-size: 12px; padding: 5px 12px; }
    .dots { gap: 6px; margin-top: 12px; margin-bottom: 12px; }
    .dot { width: 6px; height: 6px; }
    
    .title { font-size: 20px; } 
    .qty-box { height: 36px; min-width: 115px; }
    
    .combo-label { font-size: 12px; }
    #timerStatus { font-size: 9px; }
    #timerClock { font-size: 11.5px; }
    
    /* Buttons slightly narrower to fit row */
    .btn-combo { width: 100px; height: 32px; font-size: 10.5px; }
    
    .details-card { margin-top: 18px; }
    .details-card h4 { font-size: 15px; }
    .details-card ul { font-size: 13px; }
    .details-card ul li i { font-size: 11px; margin-right: 10px; }
    
    .select-title { font-size: 14px; }
    .size-pill { padding: 5px 18px; font-size: 12.5px; }
    #deliveryText { font-size: 13px; }
    
    .footer-btns { padding: 12px 20px 15px 20px; gap: 12px; }
    .footer-btn { height: 44px; font-size: 15px; border-radius: 8px; }
}


        

        @media (min-width: 400px) {
            .navbar { height: 70px; }
            .logo { font-size: 1.2rem; }
            .logo-icon-rotate { font-size: 1.7rem; }
            .toggle-btn { font-size: 2rem; }
            .app-container { margin-top: 80px; }
            .image-box { max-width: 400px; }
            .footer-btns { padding: 15px 25px 20px 25px; gap: 15px; }
            .footer-btn { height: 48px; font-size: 16px; border-radius: 10px; }
            .status-badge { font-size: 14px; padding: 6px 15px; }
            .dots { gap: 8px; margin-top: 15px; margin-bottom: 15px; }
            .dot { width: 7px; height: 7px; }
            .title { font-size: 24px; } 
            .qty-box { height: 40px; min-width: 130px; }
            .combo-label { font-size: 14px; }
            #timerStatus { font-size: 10px; }
            #timerClock { font-size: 13px; }
            .btn-combo { width: 115px; height: 35px; font-size: 11.5px; }
            .details-card { margin-top: 25px; }
            .details-card h4 { font-size: 17px; }
            .details-card ul { font-size: 14.5px; }
            .select-title { font-size: 16px; }
            .size-pill { padding: 6px 22px; font-size: 14px; }
            #deliveryText { font-size: 15px; }
            .details-card ul li i { font-size: 12px; margin-right: 12px; }
        }

        @media (max-width: 992px) {
            .nav-links { position: fixed; right: -100%; list-style: none; top: 60px; background: #ffffff; width: 240px; height: 100vh; flex-direction: column; padding: 30px; transition: 0.4s ease; z-index: 2000; box-shadow: -5px 0 15px rgba(0,0,0,0.1); }
            .nav-links.active { right: 0 !important; }
            .nav-links li { margin-bottom: 18px; }
            .nav-links li a { font-size: 0.9rem; font-weight: 600; text-decoration: none; display: block; color: #333; }
        }
    </style>
</head>
<body onload="initApp()">

    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-palette logo-icon-rotate"></i>
                <span>Ajith <span class="logo-blue">studio</span></span>
            </div>
            <ul class="nav-links" id="navLinks">
                <li><a href="index.html">HOME</a></li> 
                <li><a href="index.html#about">ABOUT</a></li>
                <li><a href="index.html#services">SERVICES</a></li>
                <li><a href="index.html#contact">CONTACT</a></li>
            </ul>
            <div class="toggle-btn" id="menuToggle"><i class="fas fa-bars"></i></div>
        </div>
    </nav>

    <div class="app-container">
        <div class="image-box">
            <div id="topBadge" class="status-badge"></div>
            <img id="displayImg" src="" alt="Poster Preview">
        </div>
        <div class="dots" id="dotContainer">
            <div class="dot active"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
        </div>

        <div class="header-row">
            <h2 class="title">Package <span>Details</span></h2>
            <div class="qty-box" id="qtyWrapper">
                <button class="qty-btn" onclick="changeQty(-1)">−</button>
                <span id="qtyVal">1</span>
                <button class="qty-btn" onclick="changeQty(1)">+</button>
            </div>
        </div>

        <div class="combo-line">
            <div id="dynamicLabel" class="combo-label">Select Your Combo</div>
            <div class="timer-wrapper" id="timerBox">
                <span id="timerStatus">OFFER ENDS IN</span>
                <span id="timerClock">00d 00h 00m 00s</span>
            </div>
        </div>

        <div class="combo-grid" id="comboButtonGrid"></div>
        
        <div class="details-card">
            <h4 id="offerTitle"></h4>
            <ul id="offerList"></ul>
        </div>

        <div class="bottom-selection">
            <div class="select-group">
                <div class="select-title">Size</div>
                <div class="pill-container">
                    <div class="size-pill active" id="size1" onclick="setSize('1080 X 1350', 'size1')">1080 X 1350</div>
                    <div class="size-pill" id="size2" onclick="setSize('1080 X 1080', 'size2')">1080 X 1080</div>
                </div>
            </div>
            <div class="select-group">
                <div class="select-title">Maximum Delivery</div>
                <div class="delivery-msg-box">
                    <span id="deliveryText">1 Day Delivery</span>
                </div>
            </div>
        </div>

        <div class="footer-btns">
            <button class="footer-btn back-btn" onclick="history.back()">Back</button>
            <button class="footer-btn next-btn" onclick="openSummary()">Next</button>
        </div>
    </div>

<script>
    const NORMAL_RATES = { c1: "99", c2: "499", c3: "999", c4: "1999", c5: "2999" };
    const FESTIVAL_RATES = { c1: "75", c2: "99", c3: "199", c4: "499", c5: "999" };

    const FESTIVAL_DB = [
        { name: "Easter", start: { month: 2, date: 25, hour: 13, min: 55 }, end: { month: 2, date: 26, hour: 19, min: 35 }, label: "Special <span class='free-blink'>Offer</span>" },
        { name: "Tamil New Year & Vishu", start: { month: 4, date: 7, hour: 0, min: 0 }, end: { month: 4, date: 15, hour: 23, min: 59 }, label: "புத்தாண்டு & விஷு <span class='free-blink'>Mega Offer</span>" },
        { name: "Workers Day", start: { month: 4, date: 24, hour: 0, min: 0 }, end: { month: 5, date: 1, hour: 23, min: 59 }, label: "May Day Special <span class='free-blink'>Offer</span>" },
        { name: "Independence Day", start: { month: 8, date: 8, hour: 0, min: 0 }, end: { month: 8, date: 15, hour: 23, min: 59 }, label: "Independence Day <span class='free-blink'>Offer</span>" },
        { name: "Onam", start: { month: 8, date: 19, hour: 0, min: 0 }, end: { month: 8, date: 27, hour: 23, min: 59 }, label: "Onam Special <span class='free-blink'>Offer</span>" },
        { name: "Vinayagar Chaturthi", start: { month: 9, date: 7, hour: 0, min: 0 }, end: { month: 9, date: 14, hour: 23, min: 59 }, label: "விநாயகர் சதுர்த்தி <span class='free-blink'>Offer</span>" },
        { name: "Ayudha & Saraswathi Puja", start: { month: 10, date: 12, hour: 0, min: 0 }, end: { month: 10, date: 21, hour: 23, min: 59 }, label: "ஆயுத பூஜை <span class='free-blink'>Special Sale</span>" },
        { name: "Deepavali", start: { month: 11, date: 1, hour: 0, min: 0 }, end: { month: 11, date: 9, hour: 23, min: 59 }, label: "தீபாவளி <span class='free-blink'>Mega Dhamaka</span>" },
        { name: "Christmas", start: { month: 12, date: 18, hour: 0, min: 0 }, end: { month: 12, date: 26, hour: 23, min: 59 }, label: "Christmas <span class='free-blink'>Special Offer</span>" },
        { name: "New Year 2027", start: { month: 12, date: 27, hour: 0, min: 0 }, end: { month: 1, date: 2, hour: 23, min: 59 }, label: "New Year 2027 <span class='free-blink'>Offer</span>" }
    ];

    const images = {
        p0: "Poster design box 1.jpg",
        p1: "Modern Social Media Design Tips by RSMAT for Engaging Visuals.jpg",
        p2: "Naturatta - Agência Let's Rock.jpg",
        p3: "social media post.jpg",
        p4: "FEED SOSIAL MEDIA TEMPLATE.jpg"
    };

    let isFestMode = false;
    let currentSelectedKey = 'c1';
    let selectedSize = "1080 X 1350";

    function getIST() { return new Date(new Date().toLocaleString('en-US', { timeZone: 'Asia/Kolkata' })); }

    function checkStatus() {
        const now = getIST();
        const year = now.getFullYear();
        const labelEl = document.getElementById('dynamicLabel');
        const badgeEl = document.getElementById('topBadge');
        const timerBox = document.getElementById('timerBox');
        
        let activeFest = null;

        FESTIVAL_DB.forEach(f => {
            let s = new Date(year, f.start.month - 1, f.start.date, f.start.hour, f.start.min);
            let e = new Date(year, f.end.month - 1, f.end.date, f.end.hour, f.end.min);
            if (f.end.month < f.start.month) e.setFullYear(year + 1);

            if (now >= s && now <= e) activeFest = { ...f, endTime: e };
        });

        if (activeFest) {
            isFestMode = true;
            timerBox.style.display = 'flex'; 
            badgeEl.innerText = "Special Offer";
            badgeEl.className = "status-badge bg-offer"; // Blinking class
            labelEl.innerHTML = activeFest.label;
            startCountdown(activeFest.endTime);
        } else {
            isFestMode = false;
            timerBox.style.display = 'none'; 
            badgeEl.innerText = "Best Price";
            badgeEl.className = "status-badge bg-best"; // Non-blinking class
            labelEl.innerText = "Select Your Combo";
        }
        renderButtons();
    }

    function startCountdown(target) {
        const now = getIST();
        const diff = target - now;
        if (diff <= 0) { checkStatus(); return; }
        const d = Math.floor(diff / 864e5), h = Math.floor(diff % 864e5 / 36e5), m = Math.floor(diff % 36e5 / 6e4), s = Math.floor(diff % 6e4 / 1e3);
        document.getElementById('timerClock').innerText = `${d}d ${h}h ${m}m ${s}s`;
    }

    function getCurrentComboData() {
        const R = isFestMode ? FESTIVAL_RATES : NORMAL_RATES;
        return {
            'c1': { p: R.c1, h: "Creative Poster", d: 0, norm: ['1 Creative Poster', 'JPG High Quality', 'Unlimited Revisions', 'Fast delivery '], fest: ['Special Wish Poster', 'Name & Photo Included', 'JPG High Quality', 'Fast Delivery'] },
            'c2': { p: R.c2, h: "combo", d: 1, norm: ['6 Creative Poster', 'JPG High Quality', 'Unlimited Revisions', 'Fast delivery'], fest: ['1 Creative Poster ', 'JPG High Quality', 'Unlimited Revisions', 'Fast delivery'] },
            'c3': { p: R.c3, h: "Premium Duo", d: 2, norm: ['12 Creative Posters', 'JPG High Quality', 'Unlimited Revisions', 'Fast delivery'], fest: ['2 Creative Posters', '1 Poster <span class="free-blink">FREE</span>', 'JPG High Quality', 'Unlimited Revisions'] },
            'c4': { p: R.c4, h: "Pro Combo", d: 3, norm: ['25 Creative Posters', '1 Motion Video', 'Unlimited Revisions', 'Fast delivery'], fest: ['5 Creative Posters', '2 Posters <span class="free-blink">FREE</span>', 'Full HD Quality', 'Unlimited Revisions'] },
            'c5': { p: R.c5, h: "Mega Pack", d: 4, norm: ['35 Mega Pack Posters', '2 Motion video', 'Unlimited Revisions', 'Fast delivery'], fest: ['10 Mega Pack Posters', '2 Posters <span class="free-blink">FREE</span>', '1 Motion Video <span class="free-blink">FREE</span>', 'Unlimited Revisions'] }
        };
    }

    function renderButtons() {
        const grid = document.getElementById('comboButtonGrid');
        const data = getCurrentComboData();
        grid.innerHTML = `
            <div class="row-compact">
                <div class="btn-combo ${currentSelectedKey==='c1'?'active':''}" onclick="selectCombo('c1')">${data.c1.p} / - Combo</div>
                <div class="btn-combo ${currentSelectedKey==='c2'?'active':''}" onclick="selectCombo('c2')">${data.c2.p} / - Combo</div>
            </div>
            <div class="row-compact">
                <div class="btn-combo ${currentSelectedKey==='c3'?'active':''}" onclick="selectCombo('c3')">${data.c3.p} / - Combo</div>
                <div class="btn-combo ${currentSelectedKey==='c4'?'active':''}" onclick="selectCombo('c4')">${data.c4.p} / - Combo</div>
                <div class="btn-combo ${currentSelectedKey==='c5'?'active':''}" onclick="selectCombo('c5')">${data.c5.p} / - Combo</div>
            </div>`;
        updateDetails();
    }

    function updateDetails() {
        const data = getCurrentComboData()[currentSelectedKey];
        const qty = parseInt(document.getElementById('qtyVal').innerText) || 1;
        document.getElementById('displayImg').src = images['p' + data.d];
        document.getElementById('offerTitle').innerText = isFestMode ? (data.p + " / - Festival Pack") : (data.p + " / - " + data.h);
        const list = document.getElementById('offerList');
        list.innerHTML = '';
        (isFestMode ? data.fest : data.norm).forEach(item => { 
            list.innerHTML += `<li><i class="fas fa-check-circle"></i> ${item}</li>`; 
        });

        document.getElementById('qtyWrapper').style.visibility = (currentSelectedKey === 'c1') ? 'visible' : 'hidden';
        
        let days = 1;
        if (isFestMode) {
            if (currentSelectedKey === 'c1' || currentSelectedKey === 'c2') days = qty;
            else if (currentSelectedKey === 'c3') days = 2;
            else if (currentSelectedKey === 'c4') days = 3;
            else if (currentSelectedKey === 'c5') days = 5;
        } else {
            if (currentSelectedKey === 'c1') days = qty;
            else if (currentSelectedKey === 'c2') days = 4;
            else if (currentSelectedKey === 'c3') days = 7;
            else if (currentSelectedKey === 'c4') days = 20;
            else if (currentSelectedKey === 'c5') days = 30;
        }
        document.getElementById('deliveryText').innerText = days + (days === 1 ? " Day Delivery" : " Days Delivery");
        document.querySelectorAll('.dot').forEach((d, idx) => d.className = idx === data.d ? 'dot active' : 'dot');
    }

    function selectCombo(key) { 
        currentSelectedKey = key; 
        document.getElementById('qtyVal').innerText = "1";
        renderButtons(); 
    }

    function changeQty(n) {
        let q = document.getElementById('qtyVal');
        let v = parseInt(q.innerText) + n;
        if(v > 0) { q.innerText = v; updateDetails(); }
    }

    function setSize(s, id) {
        selectedSize = s;
        document.querySelectorAll('.size-pill').forEach(p => p.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    function initApp() {
        checkStatus();
        setInterval(checkStatus, 1000);
        document.getElementById('menuToggle').onclick = () => document.getElementById('navLinks').classList.toggle('active');
    }

    function openSummary() {
        const R = isFestMode ? FESTIVAL_RATES : NORMAL_RATES;
        const titles = { c1: "Creative Poster", c2: "combo", c3: "Premium Duo", c4: "Pro Combo", c5: "Mega Pack" };
        const qty = (currentSelectedKey === 'c1') ? parseInt(document.getElementById('qtyVal').innerText) : 1;
        let pCount = 0;
        let days = 1;

        if (isFestMode) {
            if (currentSelectedKey === 'c1' || currentSelectedKey === 'c2') { pCount = qty; days = qty; }
            else if (currentSelectedKey === 'c3') { pCount = 2; days = 2; }
            else if (currentSelectedKey === 'c4') { pCount = 5; days = 3; }
            else if (currentSelectedKey === 'c5') { pCount = 10; days = 5; }
        } else {
            if (currentSelectedKey === 'c1') { pCount = qty; days = qty; }
            else if (currentSelectedKey === 'c2') { pCount = 6 * qty; days = 4; }
            else if (currentSelectedKey === 'c3') { pCount = 12; days = 7; }
            else if (currentSelectedKey === 'c4') { pCount = 25; days = 20; }
            else if (currentSelectedKey === 'c5') { pCount = 35; days = 30; }
        }

        localStorage.setItem('selectedOrder', JSON.stringify({
            title: titles[currentSelectedKey],
            price: R[currentSelectedKey],
            total: parseInt(R[currentSelectedKey]) * qty,
            size: selectedSize, 
            delivery: days + (days === 1 ? " Day Delivery" : " Days Delivery"),
            posterCount: pCount,
            isFestMode: isFestMode 
        }));
        window.location.href = "poster-book.html";
    }
</script>
</body>
</html>
